//Customer - Create
const createCustomerDOM = (data) => {
    const vocatives = [];
    for (const key in data.vocatives) {
        vocatives.push({id: key, name: data.vocatives[key]});
    }
    ;

    const genders = [];
    for (const key in data.genders) {
        genders.push({id: +key, name: data.genders[key]});
    }
    ;
    // let random = RandomGender(5,7);
    return `
        <div class="row mb-7">
            <div class="col-xl-4 form-group fv-row">
                <label class="control-label fs-6 fw-bold mb-2">Mã khách hàng</label> 
                <input name="Code" class="form-control form-control-solid mb-3 mb-lg-0"  autoComplete="off" value="${data.code}" placeholder="Mã đặt chỗ" readonly/>
            </div>
            <div class="col-xl-4 form-group fv-row">
                <label class="control-label fs-6 fw-bold mb-2">Danh xưng</label> 
                <select name="Vocative" class="form-select form-select-solid" data-control="select2"> 
                    <option value="">---------</option> 
                    ${buildOptions(vocatives, 'id', 'name', 'Anh')}
                </select> 
            </div>
             <div class="col-xl-4 form-group fv-row">
                <label class="control-label fs-6 fw-bold mb-2">Giới tính</label> 
                <select name="Gender" class="form-select form-select-solid" data-control="select2"> 
                    <option value="">-------</option>
                    ${buildOptions(genders, 'id', 'name', 1)}
                </select> 
            </div>
        </div>
        <div class="row mb-7">
            <div class="col-xl-4 form-group fv-row">
                 <label class="control-label fs-6 fw-bold mb-2">Họ và tên đệm</label> 
                 <input name="FirstMidName" class="form-control form-control-solid mb-3 mb-lg-0"/> 
            </div>
            <div class="col-xl-4 form-group fv-row">
                <label class="control-label fs-6 fw-bold mb-2">Tên</label> 
                <input name="LastName" class="form-control form-control-solid mb-3 mb-lg-0"/> 
            </div>
             <div class="col-xl-4 form-group fv-row">
                <label class="control-label fs-6 fw-bold mb-2">Ngày sinh</label>
                <input name="Birthday" class="form-control form-control-solid mb-3 mb-lg-0" data-date-time="flatpickr" />
            </div>
        </div>
        <div class="row mb-7">
            <div class="col-xl-4 form-group fv-row">
                 <label class="control-label fs-6 fw-bold mb-2">Số điện thoại</label> 
                 <input type="tel" name="Phone" class="form-control form-control-solid mb-3 mb-lg-0 input-phone"/> 
            </div>
            <div class="col-xl-4 form-group fv-row">
                <label class="control-label fs-6 fw-bold mb-2">Địa chỉ</label>
                <input name="Address" class="form-control form-control-solid mb-3 mb-lg-0" autocomplete="off" />
            </div> 
            <div class="col-xl-4 form-group fv-row">
                <label class="control-label fs-6 fw-bold mb-2">Email</label>
                <input name="Email" class="form-control form-control-solid mb-3 mb-lg-0" autocomplete="off" />
            </div>
        </div>
        <div class="row mb-7">
            <div class="col-xl-4 form-group fv-row">
                <label class="control-label fs-6 fw-bold mb-2">Tỉnh/Thành phố</label>
                <select name="ProvinceID" class="form-select form-select-solid" data-control="select2"> 
                    <option value="">Chọn Tỉnh/Thành phố</option>
                    ${buildOptions(data.provinces, 'id', 'name')}
                </select>
            </div>
            <div class="col-xl-4 form-group fv-row">
                <label class="control-label fs-6 fw-bold mb-2">Loại khách hàng</label>
                <select name="CustomerTypeID" class="form-select form-select-solid" data-control="select2">
                    <option value="">Chọn loại khách hàng</option>
                    ${buildOptions(data.customerTypes, 'id', 'name')}
                </select>
            </div>
            <div class="col-xl-4 form-group fv-row">
                <label class="control-label fs-6 fw-bold mb-2">Lead (todo: đổi tên)</label>
                <select name="LeadID" class="form-select form-select-solid" data-control="select2">
                    <option value="">Chọn Lead</option>
                </select>
            </div>
        </div>
        <div class="row mb-7">
             <div class="col-xl-12 form-group">
                <label class="control-label fs-6 fw-bold mb-2">Ghi chú</label>
                <textarea name="About" class="form-control form-control-solid mb-3 mb-lg-0" rows="5"></textarea>
            </div>
        </div>
        <div class="row form-group mb-7">
            <div class="col-xl-6">
                <label class="control-label mb-4">Ẩn/Hiện</label>
                <div class="form-check form-switch form-check-custom form-check-solid">
                    <input name="Status" class="form-check-input" value="true" type="checkbox" />
                    <label class="form-check-label"></label>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="text-center pt-15">
                <button type="reset" class="btn btn-light me-3 remove-form" data-bs-dismiss="modal">Hủy</button>
                <button type="submit" class="btn btn-primary" id="submit-form-create-customer">Lưu</button>
            </div>
        </div>
    `;
};

//Customer - Edit
const editCustomerDOM = (item, data, customerId) => {
    const vocatives = [];
    for (const key in data.vocatives) {
        vocatives.push({id: key, name: data.vocatives[key]});
    }
    ;

    const genders = [];
    for (const key in data.genders) {
        genders.push({id: +key, name: data.genders[key]});
    }
    ;
    return `
        <input type="hidden" name="DateCreated" value="${item.dateCreated}"/>
        <input type="hidden" name="IsDelete" value="${item.isDelete}" />
        <input type="hidden" name="CreatedBy"  value="${item.createdBy}"/>
        <div class="row mb-7">
            <div class="col-xl-4 form-group fv-row">
                <label class="control-label fs-6 fw-bold mb-2">Mã khách hàng</label> 
                <input name="Code" class="form-control form-control-solid mb-3 mb-lg-0"  autoComplete="off" value="${item.code}" placeholder="Mã đặt chỗ" readonly/>
            </div>
            <div class="col-xl-4 form-group fv-row">
                <label class="control-label fs-6 fw-bold mb-2">Danh xưng</label> 
                <select name="Vocative" class="form-select form-select-solid" data-control="select2"> 
                    <option value="">Chọn danh xưng</option> 
                    ${buildOptions(vocatives, 'id', 'name', item.vocative)}
                </select> 
            </div>
            <div class="col-xl-4 form-group fv-row">
                <label class="control-label fs-6 fw-bold mb-2">Giới tính</label> 
                <select name="Gender" class="form-select form-select-solid" data-control="select2"> 
                    <option value="" >Chọn giới tính</option>
                    ${buildOptions(genders, 'id', 'name', item.gender)}
                </select> 
            </div>
        </div>
        <div class="row mb-7">
            <div class="col-xl-4 form-group fv-row">
                 <label class="control-label fs-6 fw-bold mb-2">Họ và tên đệm</label> 
                 <input name="FirstMidName" class="form-control form-control-solid mb-3 mb-lg-0" value="${item.firstMidName}"/> 
            </div>
            <div class="col-xl-4 form-group fv-row">
                <label class="control-label fs-6 fw-bold mb-2">Tên</label> 
                <input name="LastName" class="form-control form-control-solid mb-3 mb-lg-0" value="${item.lastName}"/> 
            </div>
            <div class="col-xl-4 form-group fv-row">
                <label class="control-label fs-6 fw-bold mb-2">Ngày sinh</label>
                 <input name="Birthday" value="${formatDateTimeV2(item.birthday)}" class="form-control form-control-solid mb-3 mb-lg-0" data-date-time="flatpickr" />
            </div>
        </div>
        <div class="row mb-7">
            <div class="col-xl-4 form-group fv-row">
                 <label class="control-label fs-6 fw-bold mb-2">Số điện thoại</label> 
                 <input type="tel" name="Phone" value="${item.phone || ""}" class="form-control form-control-solid mb-3 mb-lg-0 input-phone"/> 
            </div>
            <div class="col-xl-4 form-group fv-row">
                <label class="control-label fs-6 fw-bold mb-2">Địa chỉ</label>
                <input name="Address" value="${item.address || ""}" class="form-control form-control-solid mb-3 mb-lg-0" autocomplete="off" />
            </div> 
            <div class="col-xl-4 form-group fv-row">
                <label class="control-label fs-6 fw-bold mb-2">Email</label>
                <input name="Email" value="${item.email || ""}" class="form-control form-control-solid mb-3 mb-lg-0" autocomplete="off" />
            </div>
        </div>

        <div class="row mb-7">
            <div class="col-xl-4 form-group fv-row">
                <label class="control-label fs-6 fw-bold mb-2">Tỉnh/Thành phố</label>
                <select name="ProvinceID" class="form-select form-select-solid" data-control="select2"> 
                    <option value="">Chọn Tỉnh/Thành phố</option>
                    ${buildOptions(data.provinces, 'id', 'name', item.provinceID)}
                </select>
            </div>
            <div class="col-xl-4 form-group fv-row">
                <label class="control-label fs-6 fw-bold mb-2">Loại khách hàng</label>
               <select name="CustomerTypeID" class="form-select form-select-solid" data-control="select2">
                    <option value="">Chọn loại khách hàng</option>
                    ${buildOptions(data.customerTypes, 'id', 'name', item.customerTypeID)}
                </select>
            </div>
            <div class="col-xl-4 form-group fv-row">
                <label class="control-label fs-6 fw-bold mb-2">Lead (todo: đổi tên)</label>
                <select name="LeadID" class="form-select form-select-solid" data-control="select2">
                    <option value="">Chọn Lead</option>
                </select>
            </div>
        </div>
        <div class="row mb-7">
             <div class="col-xl-12 form-group">
                <label class="control-label fs-6 fw-bold mb-2">Ghi chú</label>
                <textarea name="About" class="form-control form-control-solid mb-3 mb-lg-0" rows="5">${item.about}</textarea>
            </div>
        </div>
        <div class="row form-group mb-7">
            <div class="col-xl-6">
                <label class="control-label mb-4">Ẩn/Hiện</label>
                 <div class="form-check form-switch form-check-custom form-check-solid">
                    <input name="Status" class="form-check-input" value="true" ${item.status ? "checked" : ""} type="checkbox" />
                    <label class="form-check-label"></label>
                </div>
            </div>
        </div>
    `;
};

//Customer List Bookings
const customerBookingsDOM = (data) => {
    console.log(data);
    return `
        <tr>
            <td class="pe-0">
                <div class="fw-bolder">Ngày đặt</div>
                <div class="text-gray-600">${formatDateTime(data.dateCreated)}</div>
                <div class="fw-bolder mt-3">Điểm đến</div>
                <div class="text-gray-600">${data.destination?.name}</div>
            </td>
            <td class="pe-0">
                <div class="fw-bolder">Ngày đi</div>
                <div class="text-gray-600">${formatDateTime(data.departureDay)}</div>
                <div class="fw-bolder mt-3">Ngày về</div>
                <div class="text-gray-600">${formatDateTime(data.endDate)}</div>
            </td>
            <td class="pe-0">
                <div class="fw-bold fs-7 text-gray-600">
                    ${BookingTypeDOM[data.bookingType]}
                </div>
                <div class="fw-bold fs-7 text-gray-600 mt-3">
                    <a target="_blank" href="/Bookings?search=${data.code}&status=${BookingStatusDOM[data.status][0]}">${data.code}</a>
                </div>
                <div class="fw-bold fs-7 text-gray-600 mt-3">
                    ${BookingStatusDOM[data.status][1]}
                </div>
            </td>
            <td class="pe-0">
                ${data.bookingHotels.length > 0 ?
                    data.bookingHotels.map(hotel => `
                            <div class="fw-bolder">
                                ${hotel.hotel?.name}
                            </div>
                            <div class="text-gray-600">
                                - ${hotel.quantity} x ${hotel.roomType?.name} - ${hotel.quantityDay} đêm
                            </div>
                            <div class="mb-2 text-gray-600 mb-3">- Đối tác: ${hotel.partner?.name ?? "N/A"}</div>
                        `).join('')
                    : ''
                }
                ${data.bookingServices.length > 0 ?
                    data.bookingServices.map(service => `
                            <div class="fw-bolder">
                                ${service.service?.name}
                            </div>
                            <div class="text-gray-600">
                                - ${service.adult}L, ${service.child}TE
                            </div>
                            <div class="mb-2 text-gray-600 mb-3">- Đối tác: ${service.partner?.name ?? "N/A"}</div>
                        `).join('')
                    : ''
                }
            </td>
        </tr>
    `;
}

const BookingTypeDOM = {
    1: '<span class="badge badge-light-warning fs-7">Combo</span>',
    2: '<span class="badge badge-light-primary fs-7">Voucher</span>',
    3: '<span class="badge badge-light-info fs-7">Vé máy bay</span>',
    4: '<span class="badge badge-light-info fs-7">Dịch vụ</span>',
    5: '<span class="badge badge-light-info fs-7">Land tour</span>',
}

const BookingStatusDOM = {
    0: ['PROCESSING','<span class="badge badge-light-info d-inline">Đang xử lý</span>'],
    1: ['CANCELED','<span class="badge badge-light-danger d-inline">Hủy</span>'],
    2: ['COMPLETED','<span class="badge badge-light-success d-inline">Thành công</span>'],
    3: ['RESERVED','<span class="badge badge-light-primary d-inline">Bảo lưu</span>'],
}